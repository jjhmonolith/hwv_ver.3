# QA 테스트 시나리오 및 체크리스트

> **작성일**: 2026-01-29
> **대상 기능**: UX 개선 (세션 카드, 주제 프라이버시, 과제 정보, 파일 저장, 마크다운)

---

## 사전 조건

- 백엔드 서버 실행 중 (`npm run dev`)
- 프론트엔드 서버 실행 중 (`npm run dev`)
- 교사 계정 로그인 가능
- (파일 다운로드 테스트 시) Supabase Storage 설정 완료

---

## 1. 세션 카드 UX 개선

### 테스트 시나리오 1-1: 카드 클릭으로 세션 상세 진입

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 교사 로그인 후 대시보드 진입 | 세션 카드 목록 표시 |
| 2 | active 상태 세션 카드의 **빈 영역** 클릭 | `/teacher/sessions/{id}` 세션 상세 페이지로 이동 |
| 3 | closed 상태 세션 카드 클릭 | 동일하게 세션 상세 페이지로 이동 |
| 4 | draft 상태 세션 카드 클릭 | 동일하게 세션 상세 페이지로 이동 |

### 테스트 시나리오 1-2: 버튼 클릭 시 카드 이동 방지

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | active 세션 카드에서 "QR" 버튼 클릭 | QR 페이지로 이동 (카드 클릭 이벤트 발생 안 함) |
| 2 | active 세션 카드에서 "Close" 버튼 클릭 | 세션 종료 확인 (카드 클릭 이벤트 발생 안 함) |
| 3 | draft 세션 카드에서 "Activate" 버튼 클릭 | 세션 활성화 (카드 클릭 이벤트 발생 안 함) |
| 4 | draft 세션 카드에서 "Delete" 버튼 클릭 | 삭제 확인 다이얼로그 표시 |

### 테스트 시나리오 1-3: URL 복사 버튼 (대시보드)

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | active 세션 카드에서 "URL" 버튼 확인 | URL 버튼 표시됨 (Link2 아이콘) |
| 2 | "URL" 버튼 클릭 | 버튼 텍스트가 "Copied!"로 변경, 체크 아이콘 표시 |
| 3 | 클립보드 붙여넣기 (Ctrl/Cmd+V) | `{FRONTEND_URL}/join/{accessCode}` 형태의 URL 붙여짐 |
| 4 | 2초 대기 | 버튼이 원래 상태("URL")로 복귀 |
| 5 | closed 세션 카드에서 "Copy URL" 버튼 클릭 | 동일하게 URL 복사 동작 |
| 6 | draft 세션 카드 확인 | URL 복사 버튼 없음 (accessCode 없음) |

### 테스트 시나리오 1-4: URL 복사 버튼 (세션 상세 페이지)

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | active 세션 상세 페이지 진입 | 좌측 "Access Code" 카드 확인 |
| 2 | 액세스 코드 아래 "Copy Join URL" 버튼 클릭 | "URL Copied!" 메시지로 변경 |
| 3 | 클립보드 확인 | 학생 참가 URL 복사됨 |

---

## 2. 학생 주제 미리보기 제거

### 테스트 시나리오 2-1: 학생 업로드 후 주제 미표시

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 학생으로 세션 참가 (`/join/{code}`) | 참가 완료, 업로드 페이지로 이동 |
| 2 | PDF 파일 업로드 및 "AI 분석 시작" 클릭 | 업로드 진행 표시 |
| 3 | 분석 완료 후 화면 확인 | ✅ "분석 완료!" 메시지 표시 |
| | | ✅ "AI가 과제에서 N개의 주제를 추출했습니다" 표시 |
| | | ❌ 주제 제목/설명 목록 **표시되지 않음** |
| | | ✅ "다음 단계로" 버튼 표시 |

### 테스트 시나리오 2-2: 교사 뷰에서 주제 아코디언 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 교사로 해당 세션 상세 페이지 진입 | 참가자 목록 표시 |
| 2 | 파일 제출한 참가자 클릭 | 우측 참가자 상세 패널 열림 |
| 3 | "분석된 주제 (N개)" 섹션 확인 | 아코디언 형태로 주제 목록 표시 |
| 4 | 주제 1 클릭 | 아코디언 펼쳐짐, 주제 설명(description) 표시 |
| 5 | 주제 1 다시 클릭 | 아코디언 접힘 |
| 6 | "모두 펼치기" 버튼 클릭 | 모든 주제 펼쳐짐 |
| 7 | "모두 접기" 버튼 클릭 | 모든 주제 접힘 |

---

## 3. 과제 정보 필드

### 테스트 시나리오 3-1: 세션 생성 시 과제 정보 입력

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 대시보드에서 "New Session" 클릭 | 세션 생성 모달 열림 |
| 2 | 모달에서 "과제 정보" 필드 확인 | textarea 필드 표시, "(선택)" 라벨 |
| 3 | 제목만 입력하고 생성 | 세션 생성 성공 (과제 정보 없이) |
| 4 | 다시 세션 생성, 과제 정보 입력 | 예: `"이 과제는 비즈니스 모델에 대한 이해를 평가합니다. 핵심: 수익구조, 고객 세그먼트, 가치 제안"` |
| 5 | 세션 생성 완료 | 세션 생성 성공 |

### 테스트 시나리오 3-2: 과제 정보가 AI 분석에 반영되는지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 과제 정보가 있는 세션 활성화 | 세션 active 상태 |
| 2 | 학생으로 참가 후 PDF 업로드 | AI 분석 진행 |
| 3 | 교사 뷰에서 분석된 주제 확인 | 주제가 과제 정보에 언급된 핵심 내용과 관련됨 |
| 4 | 인터뷰 시작 후 AI 질문 확인 | 질문이 과제 맥락에 맞게 생성됨 |

### 테스트 시나리오 3-3: 인터뷰 시간에 따른 질문 복잡도

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 주제당 1분(60초) 세션 생성 | 세션 생성 |
| 2 | 인터뷰 진행 후 AI 질문 확인 | 짧고 간결한 질문 생성 |
| 3 | 주제당 5분(300초) 세션 생성 | 세션 생성 |
| 4 | 인터뷰 진행 후 AI 질문 확인 | 더 상세하고 깊이 있는 질문 생성 |

---

## 4. 파일 저장 및 다운로드

### 사전 조건

```bash
# backend/.env에 다음 설정 필요
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_KEY=xxx
SUPABASE_BUCKET=submissions
```

### 테스트 시나리오 4-1: 파일 업로드 → Supabase 저장

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 학생으로 PDF 파일 업로드 | 업로드 성공 |
| 2 | 백엔드 로그 확인 | `[Storage] File uploaded successfully: sessions/{sessionId}/{participantId}/{timestamp}_{filename}` |
| 3 | Supabase 대시보드 → Storage → submissions 버킷 확인 | 파일이 저장됨 |

### 테스트 시나리오 4-2: 교사 파일 다운로드

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 교사로 세션 상세 → 참가자 상세 열기 | "제출 파일" 섹션 표시 |
| 2 | 파일명 확인 | 원본 파일명 표시 |
| 3 | "다운로드" 버튼 클릭 | 버튼이 "다운로드 중..."으로 변경 |
| 4 | 다운로드 완료 | PDF 파일 다운로드됨, 원본 파일명 유지 |

### 테스트 시나리오 4-3: 한글 파일명 다운로드

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 학생으로 `한글파일명_테스트.pdf` 업로드 | 업로드 성공 |
| 2 | 교사로 다운로드 | 파일명이 `한글파일명_테스트.pdf`로 정상 표시 |
| 3 | 다운로드된 파일 확인 | 파일명 깨짐 없음 ✅ |

### 테스트 시나리오 4-4: Supabase 미설정 시 동작

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | .env에서 SUPABASE_URL 제거 후 서버 재시작 | 서버 시작 성공 |
| 2 | 학생으로 파일 업로드 | 업로드 성공 (분석 동작) |
| 3 | 교사로 다운로드 시도 | "No file available for download" 또는 "Storage service not configured" 메시지 |

---

## 5. 마크다운 지원 및 토큰 증가

### 테스트 시나리오 5-1: AI 응답 마크다운 렌더링

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 인터뷰 시작 후 AI 질문 확인 | AI 메시지 버블에 질문 표시 |
| 2 | AI 응답에 **볼드** 텍스트가 있는 경우 | 볼드로 렌더링됨 |
| 3 | AI 응답에 리스트가 있는 경우 | 불릿/넘버 리스트로 렌더링됨 |
| 4 | AI 응답에 `코드`가 있는 경우 | 코드 스타일로 렌더링됨 |
| 5 | 학생 메시지 확인 | 마크다운 없이 일반 텍스트로 표시 |

### 테스트 시나리오 5-2: AI 질문 끊김 없음 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 복잡한 내용의 PDF 업로드 후 인터뷰 시작 | 인터뷰 시작 |
| 2 | AI 첫 번째 질문 확인 | 질문이 중간에 끊기지 않고 완전한 문장으로 표시 |
| 3 | 답변 후 후속 질문 확인 | 질문이 완전함 |
| 4 | 긴 설명이 필요한 주제의 질문 | 상세한 질문이 생성됨 (기존 300토큰 → 800토큰) |

### 테스트 시나리오 5-3: 교사 뷰 대화 기록 마크다운

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 인터뷰 완료 후 교사로 참가자 상세 열기 | 대화 기록 표시 |
| 2 | AI 메시지 확인 | 마크다운 렌더링됨 (볼드, 리스트 등) |
| 3 | 학생 메시지 확인 | 일반 텍스트로 표시 |

---

## 결과 기록 양식

| 테스트 ID | 테스트 항목 | 통과 | 실패 | 비고 |
|-----------|-------------|:----:|:----:|------|
| 1-1 | 카드 클릭 세션 상세 진입 | ☐ | ☐ | |
| 1-2 | 버튼 클릭 시 카드 이동 방지 | ☐ | ☐ | |
| 1-3 | URL 복사 버튼 (대시보드) | ☐ | ☐ | |
| 1-4 | URL 복사 버튼 (세션 상세) | ☐ | ☐ | |
| 2-1 | 학생 주제 미표시 | ☐ | ☐ | |
| 2-2 | 교사 뷰 주제 아코디언 | ☐ | ☐ | |
| 3-1 | 과제 정보 입력 | ☐ | ☐ | |
| 3-2 | AI 분석에 과제 정보 반영 | ☐ | ☐ | |
| 3-3 | 시간별 질문 복잡도 | ☐ | ☐ | |
| 4-1 | Supabase 파일 저장 | ☐ | ☐ | |
| 4-2 | 교사 파일 다운로드 | ☐ | ☐ | |
| 4-3 | 한글 파일명 | ☐ | ☐ | |
| 4-4 | Supabase 미설정 시 | ☐ | ☐ | |
| 5-1 | 마크다운 렌더링 | ☐ | ☐ | |
| 5-2 | 질문 끊김 없음 | ☐ | ☐ | |
| 5-3 | 대화 기록 마크다운 | ☐ | ☐ | |

---

## 변경된 파일 목록

### Backend
- `backend/src/services/storage.ts` (신규) - Supabase 스토리지 서비스
- `backend/src/services/llm.ts` - 토큰 증가, 과제 정보 프롬프트 반영
- `backend/src/routes/sessions.ts` - assignment_info API, 다운로드 엔드포인트
- `backend/src/routes/interview.ts` - Supabase 업로드 통합

### Frontend
- `frontend/app/teacher/dashboard/page.tsx` - 카드 클릭, URL 복사
- `frontend/app/teacher/sessions/[id]/page.tsx` - URL 복사 버튼
- `frontend/app/interview/upload/page.tsx` - 주제 미리보기 제거
- `frontend/components/teacher/ParticipantDetail.tsx` - 주제 아코디언, 다운로드 수정
- `frontend/components/teacher/ConversationView.tsx` - 마크다운 렌더링
- `frontend/components/teacher/CreateSessionModal.tsx` - 과제 정보 필드
- `frontend/components/interview/MessageBubble.tsx` - 마크다운 렌더링

---

## 테스터 정보

- **테스터명**:
- **테스트 일자**:
- **테스트 환경**:
  - OS:
  - Browser:
  - Backend URL:
  - Frontend URL:
